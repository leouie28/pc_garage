(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{168:function(e,t,a){var i=a(217);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(3)(i,r);i.locals&&(e.exports=i.locals)},216:function(e,t,a){"use strict";a(168)},217:function(e,t,a){(e.exports=a(2)(!1)).push([e.i,"\n.profile[data-v-37c9b2d7]{\r\n    margin-top: -100px !important;\n}\n.profile[data-v-37c9b2d7] .v-avatar{\r\n    border: 4px solid #fff;\n}\n.cover[data-v-37c9b2d7]{\r\n    overflow: hidden !important;\r\n    opacity: .8;\r\n    filter: blur(4px);\r\n    -webkit-filter: blur(4px);\n}\n.profile-btn[data-v-37c9b2d7]{\r\n    z-index: 5 !important;\n}\r\n",""])},305:function(e,t,a){"use strict";a.r(t);var i=a(10),r=a.n(i);function n(e,t,a,i,r,n,o){try{var l=e[n](o),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(i,r)}var o={data:function(){return{profile:{images:[],password:""},original:{images:[]},image_base64:"",readonly:!0,date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),menu:!1,gender:["Female","Male","Hide"]}},mounted:function(){this.getProfile()},methods:{getProfile:function(){var e=this;axios.get("/customer-api/profile").then((function(t){var a=t.data;e.profile=a.profile,e.original=JSON.parse(JSON.stringify(a.profile)),a.profile.images.length>0&&(e.image_base64="/images/customer/"+a.profile.images[0].file_name),console.log(e.profile)}))},edit:function(){this.readonly=!1},update:function(){var e=this;this.profile.images.length>0?this.image_base64!="/images/customer/"+this.profile.images[0].file_name&&(this.profile.image_base64=this.image_base64):this.profile.image_base64=this.image_base64,JSON.stringify(this.profile)===JSON.stringify(this.original)?this.readonly=!0:(axios.put("/customer-api/update-profile",this.profile).then((function(t){var a=t.data;e.newAlert(!0,a.type,a.message)})),this.readonly=!0,this.getProfile())},triggerUpload:function(){this.$refs.file_input.click()},onFileChange:function(e){var t,a=this;return(t=r.a.mark((function t(){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.isUpload=!0,i=e[0],!(e.length>0)){t.next=14;break}if(i.type.match("image.*")){t.next=9;break}a.errorDialog=!0,a.errorText="Please choose an image file",t.next=14;break;case 9:return URL.createObjectURL(i),console.log(i.name,"imageURL"),t.next=13,a.createImageBase64(i);case 13:a.image_base64=t.sent;case 14:a.isUpload=!1;case 15:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(i,r){var o=t.apply(e,a);function l(e){n(o,i,r,l,s,"next",e)}function s(e){n(o,i,r,l,s,"throw",e)}l(void 0)}))})()},createImageBase64:function(e){var t=new FileReader;return new Promise((function(a,i){t.onload=function(e){var t=e.target.result;a(t)},t.readAsDataURL(e)}))}},watch:{readonly:{handler:function(e){1==e&&(console.log(e),this.profile.images.length>0?this.image_base64!=this.profile.images[0].file_name&&(this.image_base64="/images/customer/"+this.original.images[0].file_name):this.image_base64="")},immediate:!0,deep:!0}}},l=(a(216),a(1)),s=Object(l.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{staticClass:"py-3 mx-auto",attrs:{"max-width":"560",color:"grey lighten-5",elevation:"0"}},[a("v-card-text",[a("v-img",{staticClass:"mx-auto cover",attrs:{"max-height":"120","max-width":"494",src:e.profile.images.length>0?e.image_base64:"https://picsum.photos/id/11/500/300"}}),e._v(" "),a("v-card",{staticClass:"pa-4 mx-auto mt-n6",attrs:{rounded:"lg","max-width":"500",elevation:"4"}},[a("div",{staticClass:"text-center profile"},[a("input",{ref:"file_input",staticClass:"hidden",attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg"},on:{change:function(t){return e.onFileChange(t.target.files)}}}),e._v(" "),a("v-avatar",{staticClass:"elevation-4 text-center",attrs:{size:"160"}},[a("v-fab-transition",[0==e.readonly?a("v-btn",{staticClass:"profile-btn",attrs:{small:"",absolute:"",rounded:"",bottom:""},on:{click:e.triggerUpload}},[e._v("\n                            edit\n                            "),a("v-icon",[e._v("mdi-camera")])],1):e._e()],1),e._v(" "),a("v-img",{staticClass:"mx-auto",staticStyle:{"background-color":"white"},attrs:{"max-height":"300","max-width":"300",src:e.image_base64?e.image_base64:"/images/default/person.png"}})],1)],1),e._v(" "),a("v-card-text",[a("v-row",[a("v-col",{staticClass:"pt-0",attrs:{md:"12",cols:"12"}},[a("v-card-title",{staticClass:"py-0 mb-0"},[a("h5",[a("v-icon",{staticClass:"mr-1"},[e._v("mdi-information")]),e._v("\n                                    Basic Information\n                                ")],1),e._v(" "),a("v-spacer"),e._v(" "),1==e.readonly?a("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary",dark:"",icon:""},on:{click:e.edit}},"v-btn",r,!1),i),[a("v-icon",[e._v("mdi-square-edit-outline")])],1)]}}],null,!1,3262349132)},[e._v(" "),a("span",[e._v("Edit Profile")])]):a("div",[a("v-btn",{attrs:{icon:"",color:"secondary"},on:{click:function(t){e.readonly=!0}}},[a("v-icon",[e._v("mdi-close")])],1),e._v(" "),a("v-btn",{attrs:{icon:"",color:"success"},on:{click:e.update}},[a("v-icon",[e._v("mdi-check")])],1)],1)],1)],1),e._v(" "),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-text-field",{attrs:{dense:"",outlined:1!=e.readonly,readonly:e.readonly,"hide-details":"auto",label:"First Name"},model:{value:e.profile.first_name,callback:function(t){e.$set(e.profile,"first_name",t)},expression:"profile.first_name"}})],1),e._v(" "),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-text-field",{attrs:{dense:"",outlined:1!=e.readonly,readonly:e.readonly,"hide-details":"auto",label:"First Name"},model:{value:e.profile.last_name,callback:function(t){e.$set(e.profile,"last_name",t)},expression:"profile.last_name"}})],1),e._v(" "),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-select",{attrs:{dense:"",outlined:1!=e.readonly,items:e.gender,readonly:e.readonly,"hide-details":"auto",label:"Gender"},model:{value:e.profile.gender,callback:function(t){e.$set(e.profile,"gender",t)},expression:"profile.gender"}})],1),e._v(" "),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Birthday",readonly:"",outlined:1!=e.readonly,"hide-details":"",dense:""},model:{value:e.profile.birthday,callback:function(t){e.$set(e.profile,"birthday",t)},expression:"profile.birthday"}},"v-text-field",r,!1),1!=e.readonly&&i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.profile.birthday,callback:function(t){e.$set(e.profile,"birthday",t)},expression:"profile.birthday"}},[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("\n                                    Cancel\n                                ")]),e._v(" "),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.profile.birthday)}}},[e._v("\n                                    OK\n                                ")])],1)],1)],1),e._v(" "),a("v-col",{attrs:{md:"12",cols:"12"}},[a("v-text-field",{attrs:{dense:"",outlined:1!=e.readonly,readonly:e.readonly,"hide-details":"auto",label:"Address"},model:{value:e.profile.address,callback:function(t){e.$set(e.profile,"address",t)},expression:"profile.address"}})],1),e._v(" "),a("v-col",{attrs:{md:"12",cols:"12"}},[a("v-text-field",{attrs:{dense:"",outlined:1!=e.readonly,readonly:e.readonly,"hide-details":"auto",label:"Phone"},model:{value:e.profile.phone,callback:function(t){e.$set(e.profile,"phone",t)},expression:"profile.phone"}})],1),e._v(" "),a("v-col",{attrs:{md:"12",cols:"12"}},[a("v-card-title",{staticClass:"pb-0 mb-0"},[a("h5",[a("v-icon",{staticClass:"mr-1"},[e._v("mdi-shield-lock")]),e._v("\n                                    Login Information\n                                ")],1)])],1),e._v(" "),a("v-col",{attrs:{md:"12",cols:"12"}},[a("v-text-field",{attrs:{dense:"",outlined:1!=e.readonly,readonly:e.readonly,"hide-details":"auto",label:"Email"},model:{value:e.profile.email,callback:function(t){e.$set(e.profile,"email",t)},expression:"profile.email"}})],1),e._v(" "),a("v-col",{attrs:{md:"12",cols:"12"}},[a("v-text-field",{attrs:{dense:"",outlined:1!=e.readonly,readonly:e.readonly,"hide-details":"auto",type:"password",label:"Password"},model:{value:e.profile.password,callback:function(t){e.$set(e.profile,"password",t)},expression:"profile.password"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("v-snackbar",{attrs:{"multi-line":"",elevation:"12",color:e.alert.color,transition:"scroll-x-reverse-transition",top:"",right:""},model:{value:e.alert.trigger,callback:function(t){e.$set(e.alert,"trigger",t)},expression:"alert.trigger"}},[a("div",{staticClass:"d-flex justify-space-between"},[a("div",{staticClass:"mr-2"},[a("v-icon",{attrs:{large:""}},[e._v("info")]),e._v("\n        "+e._s(e.alert.text)+"\n        ")],1),e._v(" "),a("v-btn",{on:{click:function(t){e.alert.trigger=!1}}},[e._v("\n        Close\n        ")])],1)])],1)}),[],!1,null,"37c9b2d7",null);t.default=s.exports}}]);